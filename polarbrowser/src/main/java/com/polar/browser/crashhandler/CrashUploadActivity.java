package com.polar.browser.crashhandler;import android.content.Context;import android.content.Intent;import android.os.Bundle;import android.view.View;import android.view.View.OnClickListener;import com.polar.browser.R;import com.polar.browser.base.BaseActivity;import com.polar.browser.common.ui.CommonDialog;public class CrashUploadActivity extends BaseActivity {	public static final String FILE_NAME = "CrashUploadActivity.fileName";	private static final String TAG = "CrashUploadActivity";	private CommonDialog mDialog;	private String mFileName;	private IExit mExit = new IExit() {		@Override		public void exit() {			// TODO Auto-generated method stub			CrashUploadActivity.this.exit();		}	};	public static void start(Context ctx, String fileName) {		Intent intent = new Intent(ctx, CrashUploadActivity.class);		intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);		intent.putExtra(FILE_NAME, fileName);		ctx.startActivity(intent);	}	@Override	public void onCreate(Bundle savedInstanceState) {		super.onCreate(savedInstanceState);		Intent intent = getIntent();		mFileName = intent.getStringExtra(FILE_NAME);		setTitle(R.string.app_name);		setContentView(R.layout.activity_crash_upload);		init();	}	// init dialog	private void init() {		createUploadDlg();	}	private void exit() {		this.finish();		System.exit(0);	}	private void createUploadDlg() {		final CommonDialog dialog = new CommonDialog(this, getString(R.string.app_name),				getString(R.string.app_crash_upload_tip));		dialog.setBtnCancelListener(new OnClickListener() {			@Override			public void onClick(View arg0) {				// TODO Auto-generated method stub				dialog.dismiss();				exit();			}		});		dialog.setBtnOkListener(new OnClickListener() {			@Override			public void onClick(View v) {				dialog.dismiss();				createProcessingDlg();				new CrashUploadTask(mDialog, mExit, CrashUploadActivity.this.getApplicationContext()).execute(mFileName);			}		});		dialog.show();	}	private void createProcessingDlg() {		mDialog = new CommonDialog(this, getString(R.string.app_name), getString(R.string.app_crash_uploading));		mDialog.setButtonVisibility(CommonDialog.ID_BTN_OK, false);		mDialog.setBtnCancelListener(new OnClickListener() {			@Override			public void onClick(View v) {				mDialog.dismiss();				exit();			}		});		mDialog.show();	}}